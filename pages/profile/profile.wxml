<!--pages/profile/profile.wxml-->
<view class='profile-container'>
  <view class="header-container">
    <image class="header-avatar" src="{{userInfo.avatarUrl}}" background-size="cover" bindtap="getBasicInfo"></image>
    <text class="header-nickname">{{userInfo.nickName}}</text>
    <text class="header-nickname">Halo, 感谢你与微言相遇!</text>
  </view>

  <view class="weui-flex">
      <view class="weui-flex__item"><view class="placeholder" bindtap="toMyListen">我的听讲次数 {{listenCount}}</view></view>
      <view class="weui-flex__item"><view class="placeholder" bindtap="toMyDeliver">我的主讲次数 {{deliverCount}}</view></view>
  </view>

  <view class="page__hd">
    <!-- TODO：需要判断活动列表的状态，最近安排为未结束的活动 -->
    <view class="page__title">最近安排</view>
    <view class='mySpeaker'>
      <view class="page__desc">我的主讲</view>
      <!-- <view wx:if="{{活动列表中发起人id有我==true 或者我的发起活动列表>0的}}"> -->
      <view wx:if="{{myDeliverNum}}">

        <!-- TODO：我的主讲-活动列表，修改内容 -->
        <scroll-view scroll-y="true" class='activities'>
          <view class='activity' bindtap='showDetail' wx:key="activities"  wx:for="{{activityList}}" wx:for-index="idx" id='{{idx}}'>
              <view class="activity-header">
                <view class="start">
                  <image class="header-avatar" src="{{item.kuHeadImgUrl}}" background-size="cover" bindtap="getBasicInfo"></image>
                  <text class="header-nickname">{{item.ksUser.kuName}}</text>
                </view>
                <view class="distance">
                  <view class="image"><image src="../../images/truck_on_the_road.png"></image></view>
                  <text>{{item.ksStartTime}}\n{{item.ksBusiness.kbName}}</text>
                </view>
                <view class="end">
                  <text class="city">报名中{{item.ksStatus}}</text>
                  <text class="province">已报名{{item.ksEnrollNum}}人</text>
                </view>
              </view>
              <view class='activity-main'>
                <view class='list-title'>
                  <text class="list-item-title">{{item.ksTitle}}</text>
                </view>
                <view class='list-abstract'>
                  摘要
                  <text class="list-item-abstract">{{item.ksAbstract}}</text>
                </view>
              </view>
          </view>
        </scroll-view>

      </view>
      <view wx:else>
        <view class="weui-flex__item"><view class="placeholder">暂无</view></view>
      </view>
    </view>
    <view class='myParticipation'>
      <view class="page__desc">我的参讲</view>
      <!-- <view wx:if="{{活动列表中参与者id有我==true 或者我的参讲活动列表>0的}}"> -->
      <view wx:if="{{myParticiptionNum}}">

        <!-- TODO：我的参讲-活动列表，修改内容 -->
        <scroll-view scroll-y="true" class='activities'>
          <view class='activity' bindtap='showDetail' wx:key="activities"  wx:for="{{activityList}}" wx:for-index="idx" id='{{idx}}'>
              <view class="activity-header">
                <view class="start">
                  <image class="header-avatar" src="{{item.kuHeadImgUrl}}" background-size="cover" bindtap="getBasicInfo"></image>
                  <text class="header-nickname">{{item.ksUser.kuName}}</text>
                </view>
                <view class="distance">
                  <view class="image"><image src="../../images/truck_on_the_road.png"></image></view>
                  <text>{{item.ksStartTime}}\n{{item.ksBusiness.kbName}}</text>
                </view>
                <view class="end">
                  <text class="city">报名中{{item.ksStatus}}</text>
                  <text class="province">已报名{{item.ksEnrollNum}}人</text>
                </view>
              </view>
              <view class='activity-main'>
                <view class='list-title'>
                  <text class="list-item-title">{{item.ksTitle}}</text>
                </view>
                <view class='list-abstract'>
                  摘要
                  <text class="list-item-abstract">{{item.ksAbstract}}</text>
                </view>
              </view>
          </view>
        </scroll-view>

      </view>
      <view wx:else>
        <view class="weui-flex__item"><view class="placeholder">暂无</view></view>
      </view>
    </view>
        <view class='myEnrollment'>
      <view class="page__desc">我的报名</view>
      <!-- <view wx:if="{{活动列表中报名者id有我==true 或者我的报名活动列表>0的}}"> -->
      <view wx:if="{{myenrollmentNum}}">

        <!-- TODO：我的报名-活动列表，修改内容 -->
        <scroll-view scroll-y="true" class='activities'>
          <view class='activity' bindtap='showDetail' wx:key="activities"  wx:for="{{activityList}}" wx:for-index="idx" id='{{idx}}'>
              <view class="activity-header">
                <view class="start">
                  <image class="header-avatar" src="{{item.kuHeadImgUrl}}" background-size="cover" bindtap="getBasicInfo"></image>
                  <text class="header-nickname">{{item.ksUser.kuName}}</text>
                </view>
                <view class="distance">
                  <view class="image"><image src="../../images/truck_on_the_road.png"></image></view>
                  <text>{{item.ksStartTime}}\n{{item.ksBusiness.kbName}}</text>
                </view>
                <view class="end">
                  <text class="city">报名中{{item.ksStatus}}</text>
                  <text class="province">已报名{{item.ksEnrollNum}}人</text>
                </view>
              </view>
              <view class='activity-main'>
                <view class='list-title'>
                  <text class="list-item-title">{{item.ksTitle}}</text>
                </view>
                <view class='list-abstract'>
                  摘要
                  <text class="list-item-abstract">{{item.ksAbstract}}</text>
                </view>
              </view>
          </view>
        </scroll-view>

      </view>
      <view wx:else>
        <view class="weui-flex__item"><view class="placeholder">暂无</view></view>
      </view>
    </view>
  </view>
</view>